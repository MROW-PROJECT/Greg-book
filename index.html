<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Greg Book - Independent Third-Party Cruise Booking V5 </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Base */
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
          "Oxygen", "Ubuntu", "Cantarell", sans-serif;
        -webkit-font-smoothing: antialiased;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      /*
        Strict copy-protection policy:
        - By default disable text selection everywhere to prevent copying/accidental selection
          and to stop clicks from selecting nearby text.
        - Explicitly re-enable selection only for real form controls (so typing/caret works)
          and for the Booking ID element (#booking-id).
      */
      * {
        -webkit-user-select: none !important;
        user-select: none !important;
        -webkit-touch-callout: none !important; /* iOS Safari */
      }

      /* Allow typing/caret and selection inside inputs, textareas, selects and options */
      input,
      textarea,
      select,
      option {
        -webkit-user-select: text !important;
        user-select: text !important;
      }

      /* Make the booking ID (and any element with .allow-select) selectable */
      #booking-id,
      .allow-select {
        -webkit-user-select: text !important;
        user-select: text !important;
      }

      /* Ensure interactive controls (buttons, labels, cards) cannot be selected */
      button,
      label,
      .card-hover,
      .checkbox-label {
        -webkit-user-select: none !important;
        user-select: none !important;
        cursor: pointer;
      }

      /* Small niceties */
      .glass {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      /* Make ::selection invisible for everything else (defensive) */
      ::selection {
        background: transparent;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      // Icons
      const Ship = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1" />
          <path d="M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76" />
          <path d="M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6" />
          <path d="M12 10v4" />
          <path d="M12 2v3" />
        </svg>
      );

      const Calendar = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
          <line x1="16" y1="2" x2="16" y2="6" />
          <line x1="8" y1="2" x2="8" y2="6" />
          <line x1="3" y1="10" x2="21" y2="10" />
        </svg>
      );

      const Users = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
          <circle cx="9" cy="7" r="4" />
          <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
          <path d="M16 3.13a4 4 0 0 1 0 7.75" />
        </svg>
      );

      const CreditCard = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
          <line x1="1" y1="10" x2="23" y2="10" />
        </svg>
      );

      const CheckCircle = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
          <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
      );

      const Anchor = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <circle cx="12" cy="5" r="3" />
          <line x1="12" y1="22" x2="12" y2="8" />
          <path d="M5 12H2a10 10 0 0 0 20 0h-3" />
        </svg>
      );

      const ChevronRight = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <polyline points="9 18 15 12 9 6" />
        </svg>
      );

      const AlertCircle = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
      );

      const Home = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
          <polyline points="9 22 9 12 15 12 15 22" />
        </svg>
      );

      const BarChart = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <line x1="12" y1="20" x2="12" y2="10" />
          <line x1="18" y1="20" x2="18" y2="4" />
          <line x1="6" y1="20" x2="6" y2="16" />
        </svg>
      );

      const Settings = ({ size = 24, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <circle cx="12" cy="12" r="3" />
          <path d="M12 1v6m0 6v6m6-12h-6m-6 0H1m11 6h6m-12 0H1" />
        </svg>
      );

      const GregBookCruise = () => {
        const [activeTab, setActiveTab] = useState("dashboard");
        const [currentPage, setCurrentPage] = useState("overview");
        const [formData, setFormData] = useState({
          region: "",
          port: "",
          ship: "",
          itinerary: "",
          nights: "",
          departure: "",
          sailingDate: "",
          guests: 2,
          roomType: "",
          robloxUsername: "",
          discordUsername: "",
          cardNumber: "",
          expiryDate: "",
          cvv: "",
          cardName: "",
          agreedTerms: false,
          agreedThirdParty: false,
          agreedRoomSubject: false,
          agreedNonRefundable: false,
          agreedPriceChanges: false,
          agreedDocumentation: false,
          agreedInsurance: false,
        });
        const [bookingStatus, setBookingStatus] = useState(null);
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [bookingId, setBookingId] = useState(null); // persistent booking id for confirmation and selection

        const cruiseData = {
          "CR Odyssey": {
            itinerary: "Round Trip Bahamas Cruise",
            nights: "7",
            ports: ["Port of New York, NY"],
            region: "Bahamas",
            price: 2100,
            portsOfCall: "Port Of New York - Port Canaveral - Nassau - Ocean's Edge - Port Of New York"
          },
          "CR Sentient": {
            itinerary: "Hawaii & Honolulu Cruise",
            nights: "17",
            ports: ["Port Mirage Bay, AZ"],
            region: "Hawaii",
            price: 3800,
            portsOfCall: "Port Mirage Bay - Honolulu, Oahu - Kona - Port Mirage Bay"
          },
          "CR Pride Of America": {
            itinerary: "Hawaii & Honolulu Cruise",
            nights: "19",
            ports: ["Port Mirage Bay, AZ"],
            region: "Hawaii",
            price: 3400,
            portsOfCall: "Port Mirage Bay - Ensenada - Honolulu, Oahu - Kona - Port Mirage Bay"
          },
          "CR Orion": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "3",
            ports: ["Port Mirage Bay, AZ"],
            region: "Catalina",
            price: 110,
            portsOfCall: "Port Mirage Bay - Ensenada - Port Mirage Bay"
          },
          "CR Dawn": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "3",
            ports: ["Port Mirage Bay, AZ"],
            region: "Catalina",
            price: 116,
            portsOfCall: "Port Mirage Bay - Catalina Island - Port Mirage Bay"
          },
          "CR Riviera": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "4",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 400,
            portsOfCall: "Port Mirage Bay - Cabo San Lucas - Port Mirage Bay"
          },
          "CR Pacific Dream": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "5",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 988,
            portsOfCall: "Port Mirage Bay - Cabo San Lucas - Mazatlan - Puerto Vallarta - Port Mirage Bay"
          },
          "CR Pacific Mariner": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "9",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 991,
            portsOfCall: "Port Mirage Bay - Catalina Island - Ensenada - Cabo San Lucas - Mazatlan - Puerto Vallarta - Port Mirage Bay"
          },
          "CR Legacy": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "9",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 1617,
            portsOfCall: "Port Mirage Bay - Ensenada - Cabo San Lucas - Port Mirage Bay"
          },
          "CR Solstice": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "7",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 1170,
            portsOfCall: "Port Mirage Bay - Catalina Island - Ensenada - Cabo San Lucas - Mazatlan - Puerto Vallarta - Port Mirage Bay"
          },
          "CR Essence of the Seas": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "9",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 1099,
            portsOfCall: "Port Mirage Bay - Catalina Island - Ensenada - Cabo San Lucas - Mazatlan - Puerto Vallarta - Port Mirage Bay"
          },
          "CR Jadeite of the Seas": {
            itinerary: "Catalina & Ensenada Cruise",
            nights: "7",
            ports: ["Port Mirage Bay, AZ"],
            region: "Mexico",
            price: 2700,
            portsOfCall: "Port Mirage Bay - Catalina Island - Ensenada - Cabo San Lucas - Port Mirage Bay"
          },
          "CR Galaxy": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "4",
            ports: ["Port Canaveral, FL"],
            region: "Bahamas",
            price: 199,
            portsOfCall: "Port Canaveral - Key West - Ocean's Edge - Port Canaveral"
          },
          "CR Treasure": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "4",
            ports: ["Port Everglades, FL"],
            region: "Bahamas",
            price: 215,
            portsOfCall: "Port Everglades - Key West - Ocean's Edge - Port Everglades"
          },
          "CR Tropical": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "4",
            ports: ["Port Canaveral, FL"],
            region: "Bahamas",
            price: 210,
            portsOfCall: "Port Canaveral - Key West - Ocean's Edge - Port Canaveral"
          },
          "CR Adventure": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "3",
            ports: ["Port Everglades, FL"],
            region: "Bahamas",
            price: 777,
            portsOfCall: "Port Everglades - Nassau - Ocean's Edge - Port Canaveral"
          },
          "CR Star": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "3",
            ports: ["Port Canaveral, FL"],
            region: "Bahamas",
            price: 1161,
            portsOfCall: "Port Canaveral - Nassau - Ocean's Edge - Port Canaveral"
          },
          "CR Dream": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "4",
            ports: ["Port Canaveral, FL"],
            region: "Bahamas",
            price: 1499,
            portsOfCall: "Port Canaveral - Nassau - Ocean's Edge - Port Canaveral"
          },
          "CR Encore": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "4",
            ports: ["Port Everglades, FL"],
            region: "Bahamas",
            price: 1050,
            portsOfCall: "Port Everglades - Nassau - Ocean's Edge - Port Everglades"
          },
          "CR Caribbean": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "7",
            ports: ["Port Canaveral, FL"],
            region: "Bahamas",
            price: 1100,
            portsOfCall: "Port Canaveral - Nassau - Freeport - Bimini - Key West - Ocean's Edge - Port Canaveral"
          },
          "CR Emerald of the Seas": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "6",
            ports: ["Port Canaveral, FL"],
            region: "Bahamas",
            price: 1200,
            portsOfCall: "Port Canaveral - Nassau - Key West - Ocean's Edge - Port Canaveral"
          },
          "CR Diamond of the Seas": {
            itinerary: "Bahamas: Ocean's Edge & Nassau",
            nights: "9",
            ports: ["Port Miami, FL"],
            region: "Bahamas",
            price: 1900,
            portsOfCall: "Port Miami - Nassau - Freeport - Bimini - Ocean's Edge - Port Miami"
          }
        };

        const regions = ["Bahamas", "Catalina", "Mexico", "Hawaii"];
        const roomTypes = [
          { type: "Interior", price: 1 },
          { type: "Ocean View", price: 1.2 },
          { type: "Balcony", price: 1.5 },
          { type: "Suite", price: 2 },
        ];

        const calculateTotal = () => {
          const room = roomTypes.find((r) => r.type === formData.roomType);
          const shipData = cruiseData[formData.ship];
          if (!room || !shipData) return 0;
          return shipData.price * room.price * formData.guests;
        };

        const getAvailableShips = () => {
          if (!formData.region) return [];
          return Object.keys(cruiseData).filter(
            ship => cruiseData[ship].region === formData.region
          );
        };

        const getAvailablePorts = () => {
          if (!formData.region) {
            return [...new Set(Object.values(cruiseData).flatMap(ship => ship.ports))];
          }
          const shipsInRegion = Object.values(cruiseData).filter(
            ship => ship.region === formData.region
          );
          return [...new Set(shipsInRegion.flatMap(ship => ship.ports))];
        };

        const sendWebhook = (bookingData, id) => {
          const webhookUrl =
            "https://discord.com/api/webhooks/1462305721080221847/65dPZEh2o2vUyew4XT6EV1eQSgufkHqowH166Z_W8Y6tR1tUwE7sOfh4NxJJMEEXHgtM";
          const total = calculateTotal();

          const payload = {
            embeds: [
              {
                title: "ðŸš¢ New Cruise Booking",
                color: 3066993,
                fields: [
                  { name: "Booking ID", value: id, inline: false },
                  { name: "ðŸ‘¤ Roblox Username", value: bookingData.robloxUsername, inline: true },
                  { name: "ðŸ’¬ Discord Username", value: bookingData.discordUsername, inline: true },
                  { name: "ðŸ“… Sailing Date", value: bookingData.sailingDate, inline: true },
                  { name: "ðŸš¢ Ship", value: bookingData.ship, inline: true },
                  { name: "ðŸ—ºï¸ Itinerary", value: bookingData.itinerary, inline: true },
                  { name: "âš“ Port", value: bookingData.port, inline: true },
                  { name: "ðŸŒŽ Region", value: bookingData.region, inline: true },
                  { name: "ðŸŒ™ Duration", value: `${bookingData.nights} nights`, inline: true },
                  { name: "ðŸ‘¥ Guests", value: bookingData.guests.toString(), inline: true },
                  { name: "ðŸ›ï¸ Room Type", value: bookingData.roomType, inline: true },
                  { name: "ðŸ’° Total Amount", value: `$${total.toFixed(2)}`, inline: false },
                ],
                timestamp: new Date().toISOString(),
                footer: { text: "Greg Book - Third-Party Cruise Booking" },
              },
            ],
          };

          fetch(webhookUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          }).catch(() => {});
        };

        const handleSubmit = () => {
          const allAgreed = 
            formData.agreedTerms &&
            formData.agreedThirdParty &&
            formData.agreedRoomSubject &&
            formData.agreedNonRefundable &&
            formData.agreedPriceChanges &&
            formData.agreedDocumentation &&
            formData.agreedInsurance;

          if (!allAgreed) {
            alert("Please agree to all terms and conditions before confirming your booking");
            return;
          }

          setIsSubmitting(true);
          const id = `GB-${Date.now()}`;
          setBookingId(id);
          sendWebhook(formData, id);

          setTimeout(() => {
            setIsSubmitting(false);
            setBookingStatus("success");
            setCurrentPage("confirmation");
          }, 1500);
        };

        const canProceed = () => {
          switch (currentPage) {
            case "overview":
              return formData.ship && formData.itinerary && formData.nights && formData.departure;
            case "sailing":
              return formData.sailingDate;
            case "guests":
              return formData.guests && formData.roomType && formData.robloxUsername.trim() && formData.discordUsername.trim();
            case "payment":
              return (
                formData.cardNumber && formData.expiryDate && formData.cvv && formData.cardName &&
                formData.agreedTerms && formData.agreedThirdParty && formData.agreedRoomSubject &&
                formData.agreedNonRefundable && formData.agreedPriceChanges && formData.agreedDocumentation && formData.agreedInsurance
              );
            default:
              return false;
          }
        };

        // Dashboard Content
        const DashboardContent = () => (
          <div className="space-y-6">
            <div className="grid md:grid-cols-3 gap-6">
              <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-500 text-sm">Total Ships</p>
                    <h3 className="text-3xl font-bold text-gray-800 mt-1">22</h3>
                  </div>
                  <Ship size={40} className="text-blue-500" />
                </div>
              </div>
              
              <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-500 text-sm">Available Routes</p>
                    <h3 className="text-3xl font-bold text-gray-800 mt-1">4</h3>
                  </div>
                  <Calendar size={40} className="text-green-500" />
                </div>
              </div>

              <div className="bg-white rounded-xl p-6 shadow-lg card-hover">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-500 text-sm">Starting From</p>
                    <h3 className="text-3xl font-bold text-gray-800 mt-1">$110</h3>
                  </div>
                  <CreditCard size={40} className="text-purple-500" />
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl p-8 shadow-lg">
              <h2 className="text-2xl font-bold mb-6">Featured Destinations</h2>
              <div className="grid md:grid-cols-2 gap-6">
                {regions.map((region) => {
                  const shipsInRegion = Object.values(cruiseData).filter(ship => ship.region === region);
                  const minPrice = Math.min(...shipsInRegion.map(ship => ship.price));
                  
                  return (
                    <div key={region} className="border-2 border-gray-200 rounded-xl p-6 hover:border-blue-500 transition cursor-pointer"
                      onClick={() => {
                        setActiveTab("booking");
                        setFormData({ ...formData, region: region });
                      }}>
                      <h3 className="text-xl font-bold mb-2">{region}</h3>
                      <p className="text-gray-600 mb-4">{shipsInRegion.length} ships available</p>
                      <p className="text-2xl font-bold text-blue-600">From ${minPrice}</p>
                    </div>
                  );
                })}
              </div>
            </div>

            <div className="bg-white rounded-xl p-8 shadow-lg">
              <h2 className="text-2xl font-bold mb-6">Why Choose Greg Book?</h2>
              <div className="grid md:grid-cols-3 gap-6">
                <div className="text-center">
                  <div className="bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <Ship size={32} className="text-blue-600" />
                  </div>
                  <h3 className="font-bold mb-2">Wide Selection</h3>
                  <p className="text-gray-600 text-sm">22 ships across 4 destinations</p>
                </div>
                <div className="text-center">
                  <div className="bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <CheckCircle size={32} className="text-green-600" />
                  </div>
                  <h3 className="font-bold mb-2">Best Prices</h3>
                  <p className="text-gray-600 text-sm">Competitive rates guaranteed</p>
                </div>
                <div className="text-center">
                  <div className="bg-purple-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <Users size={32} className="text-purple-600" />
                  </div>
                  <h3 className="font-bold mb-2">Easy Booking</h3>
                  <p className="text-gray-600 text-sm">Simple 4-step process</p>
                </div>
              </div>
            </div>
          </div>
        );

        // Booking Flow Components
        const ProgressBar = () => {
          const pages = ["overview", "sailing", "guests", "payment", "confirmation"];
          const currentIndex = pages.indexOf(currentPage);

          return (
            <div className="mb-8">
              <div className="flex items-center justify-between">
                {pages.map((page, idx) => (
                  <React.Fragment key={page}>
                    <div className="flex flex-col items-center">
                      <div className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${
                          idx <= currentIndex ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-500"
                        }`}>
                        {idx + 1}
                      </div>
                      <span className="text-xs mt-2 capitalize">{page}</span>
                    </div>
                    {idx < pages.length - 1 && (
                      <div className={`flex-1 h-1 mx-2 ${idx < currentIndex ? "bg-blue-600" : "bg-gray-200"}`} />
                    )}
                  </React.Fragment>
                ))}
              </div>
            </div>
          );
        };

        const OverviewPage = () => (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold flex items-center gap-2">
              <Ship size={24} className="text-blue-600" />
              Cruise Overview
            </h2>

            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium mb-2">Departure Port</label>
                <select
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  value={formData.port}
                  onChange={(e) =>
                    setFormData({ ...formData, port: e.target.value, ship: "" })
                  }
                  disabled={!formData.region}
                >
                  <option value="">Select Port</option>
                  {getAvailablePorts().map((p) => (
                    <option key={p} value={p}>{p}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">Ship</label>
                <select
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  value={formData.ship}
                  onChange={(e) => {
                    const selectedShip = e.target.value;
                    const shipData = cruiseData[selectedShip];
                    setFormData({
                      ...formData,
                      ship: selectedShip,
                      itinerary: shipData?.itinerary || "",
                      nights: shipData?.nights || "",
                      port: shipData?.ports[0] || formData.port,
                    });
                  }}
                  disabled={!formData.region}
                >
                  <option value="">Select Ship</option>
                  {getAvailableShips().map((s) => (
                    <option key={s} value={s}>{s}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">Itinerary</label>
                <input
                  type="text"
                  className="w-full p-3 border border-gray-300 rounded-lg bg-gray-50"
                  value={formData.itinerary}
                  disabled
                  placeholder="Select a ship first"
                />
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">Nights</label>
                <input
                  type="text"
                  className="w-full p-3 border border-gray-300 rounded-lg bg-gray-50"
                  value={formData.nights ? `${formData.nights} Nights` : ""}
                  disabled
                  placeholder="Select a ship first"
                />
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">Departure Month</label>
                <select
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  value={formData.departure}
                  onChange={(e) =>
                    setFormData({ ...formData, departure: e.target.value })
                  }
                >
                  <option value="">Select Month</option>
                  <option value="Feb 2026">February 2026</option>
                  <option value="Mar 2026">March 2026</option>
                  <option value="Apr 2026">April 2026</option>
                  <option value="May 2026">May 2026</option>
                  <option value="Jun 2026">June 2026</option>
                </select>
              </div>
            </div>
          </div>
        );

        const SailingPage = () => (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold flex items-center gap-2">
              <Calendar size={24} className="text-blue-600" />
              Select Sailing Date
            </h2>

            <div className="bg-blue-50 p-4 rounded-lg">
              <p className="text-sm text-blue-900">
                <strong>Ship:</strong> {formData.ship} | <strong>Itinerary:</strong> {formData.itinerary} | <strong>Duration:</strong> {formData.nights} nights
              </p>
              {cruiseData[formData.ship] && (
                <p className="text-xs text-blue-700 mt-2">
                  <strong>Ports:</strong> {cruiseData[formData.ship].portsOfCall}
                </p>
              )}
            </div>

            <div className="grid md:grid-cols-3 gap-4">
              {["Feb 15, 2026", "Feb 22, 2026", "Mar 01, 2026", "Mar 08, 2026", "Mar 15, 2026", "Mar 22, 2026"].map((date) => (
                <button
                  key={date}
                  onClick={() => setFormData({ ...formData, sailingDate: date })}
                  className={`p-4 border-2 rounded-lg text-left transition card-hover ${
                    formData.sailingDate === date ? "border-blue-600 bg-blue-50" : "border-gray-200 hover:border-blue-300"
                  }`}
                >
                  <div className="font-semibold">{date}</div>
                  <div className="text-sm text-gray-600 mt-1">From ${cruiseData[formData.ship]?.price || 0}</div>
                </button>
              ))}
            </div>
          </div>
        );

        const GuestsPage = () => (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold flex items-center gap-2">
              <Users size={24} className="text-blue-600" />
              Guests & Room Selection
            </h2>

            <div>
              <label className="block text-sm font-medium mb-2">Roblox Username *</label>
              <input
                type="text"
                placeholder="Enter your Roblox username"
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                value={formData.robloxUsername}
                onChange={(e) => setFormData({ ...formData, robloxUsername: e.target.value })}
                autoComplete="off"
                spellCheck="false"
                autoCorrect="off"
                autoCapitalize="off"
              />
            </div>

            <div>
              <label className="block text-sm font-medium mb-2">Discord Username *</label>
              <input
                type="text"
                placeholder="username or username#0000"
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                value={formData.discordUsername}
                onChange={(e) => setFormData({ ...formData, discordUsername: e.target.value })}
                autoComplete="off"
                spellCheck="false"
                autoCorrect="off"
                autoCapitalize="off"
              />
              <p className="text-xs text-gray-500 mt-1">Booking details will be sent to Discord webhook</p>
            </div>

            <div>
              <label className="block text-sm font-medium mb-2">Number of Guests</label>
              <div className="flex gap-2">
                {[1, 2, 3, 4].map((num) => (
                  <button
                    key={num}
                    onClick={() => setFormData({ ...formData, guests: num })}
                    className={`px-6 py-3 rounded-lg font-semibold transition ${
                      formData.guests === num ? "bg-blue-600 text-white" : "bg-gray-100 hover:bg-gray-200"
                    }`}
                  >
                    {num} Guest{num > 1 ? "s" : ""}
                  </button>
                ))}
              </div>
            </div>

            <div>
              <label className="block text-sm font-medium mb-4">Room Type</label>
              <div className="grid md:grid-cols-2 gap-4">
                {roomTypes.map((room) => {
                  const shipData = cruiseData[formData.ship];
                  const basePrice = shipData ? shipData.price : 0;
                  const roomPrice = basePrice * room.price;
                  
                  return (
                    <button
                      key={room.type}
                      onClick={() => setFormData({ ...formData, roomType: room.type })}
                      className={`p-6 border-2 rounded-lg text-left transition card-hover ${
                        formData.roomType === room.type ? "border-blue-600 bg-blue-50" : "border-gray-200 hover:border-blue-300"
                      }`}
                    >
                      <div className="font-bold text-lg">{room.type}</div>
                      <div className="text-2xl font-bold text-blue-600 mt-2">${(roomPrice * formData.guests).toFixed(2)}</div>
                      <div className="text-sm text-gray-600">for {formData.guests} guest{formData.guests > 1 ? 's' : ''} ({formData.nights} nights)</div>
                    </button>
                  );
                })}
              </div>
            </div>
          </div>
        );

        const PaymentPage = () => (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold flex items-center gap-2">
              <CreditCard size={24} className="text-blue-600" />
              Payment Information (Demo)
            </h2>

            <div className="bg-yellow-50 border border-yellow-200 p-4 rounded-lg flex items-start gap-3">
              <AlertCircle size={20} className="text-yellow-600 flex-shrink-0 mt-1" />
              <p className="text-sm text-yellow-900">This is a demo payment form. No actual charges will be processed. Use test card: 4242 4242 4242 4242</p>
            </div>

            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-2">Card Number</label>
                <input
                  type="text"
                  placeholder="4242 4242 4242 4242"
                  maxLength="19"
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  value={formData.cardNumber}
                  onChange={(e) => setFormData({ ...formData, cardNumber: e.target.value })}
                  autoComplete="off"
                  spellCheck="false"
                  autoCorrect="off"
                  autoCapitalize="off"
                />
              </div>

              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium mb-2">Expiry Date</label>
                  <input
                    type="text"
                    placeholder="MM/YY"
                    maxLength="5"
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    value={formData.expiryDate}
                    onChange={(e) => setFormData({ ...formData, expiryDate: e.target.value })}
                    autoComplete="off"
                    spellCheck="false"
                    autoCorrect="off"
                    autoCapitalize="off"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-2">CVV</label>
                  <input
                    type="text"
                    placeholder="123"
                    maxLength="4"
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    value={formData.cvv}
                    onChange={(e) => setFormData({ ...formData, cvv: e.target.value })}
                    autoComplete="off"
                    spellCheck="false"
                    autoCorrect="off"
                    autoCapitalize="off"
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">Cardholder Name</label>
                <input
                  type="text"
                  placeholder="John Doe"
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  value={formData.cardName}
                  onChange={(e) => setFormData({ ...formData, cardName: e.target.value })}
                  autoComplete="off"
                  spellCheck="false"
                  autoCorrect="off"
                />
              </div>
            </div>

            <div className="border-t pt-4 space-y-3">
              {[
                { key: 'agreedTerms', text: 'I have read and agree to the Terms & Conditions, Privacy Policy, and Cancellation Policy.' },
                { key: 'agreedThirdParty', text: 'I understand this is a third-party booking and Greg Book is not affiliated with any cruise line.' },
                { key: 'agreedRoomSubject', text: 'I acknowledge that room type and cabin assignment are subject to change and availability at check-in.' },
                { key: 'agreedNonRefundable', text: 'I understand that this booking may be non-refundable and cancellation fees may apply.' },
                { key: 'agreedPriceChanges', text: 'I acknowledge that prices are subject to change and additional fees (port fees, taxes, gratuities) may apply.' },
                { key: 'agreedDocumentation', text: 'I am responsible for ensuring I have proper travel documentation (passport, visas, ID) for all ports of call.' },
                { key: 'agreedInsurance', text: 'I understand that travel insurance is recommended but not included in this booking.' }
              ].map(({ key, text }) => (
                <label key={key} className="flex items-start gap-3 checkbox-label">
                  <input
                    type="checkbox"
                    checked={formData[key]}
                    onChange={(e) => setFormData({ ...formData, [key]: e.target.checked })}
                    className="mt-1"
                  />
                  <span className="text-sm text-gray-700">{text}</span>
                </label>
              ))}
            </div>
          </div>
        );

        const ConfirmationPage = () => (
          <div className="text-center space-y-6">
            <div className="inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full">
              <CheckCircle size={48} className="text-green-600" />
            </div>

            <h2 className="text-3xl font-bold text-gray-900">Booking Confirmed!</h2>

            <div className="bg-gray-50 p-6 rounded-lg text-left max-w-2xl mx-auto">
              <h3 className="font-bold text-lg mb-4">Booking Details</h3>
              <div className="space-y-2 text-sm">
                <p><strong>Booking ID:</strong> <span id="booking-id" className="allow-select">{bookingId || `GB-${Date.now()}`}</span></p>
                <p><strong>Roblox Username:</strong> {formData.robloxUsername}</p>
                <p><strong>Discord Username:</strong> {formData.discordUsername}</p>
                <p><strong>Ship:</strong> {formData.ship}</p>
                <p><strong>Itinerary:</strong> {formData.itinerary}</p>
                <p><strong>Sailing Date:</strong> {formData.sailingDate}</p>
                <p><strong>Port:</strong> {formData.port}</p>
                <p><strong>Duration:</strong> {formData.nights} nights</p>
                <p><strong>Guests:</strong> {formData.guests}</p>
                <p><strong>Room Type:</strong> {formData.roomType}</p>
                <p className="text-xl font-bold text-blue-600 pt-4 border-t">Total: ${calculateTotal().toFixed(2)}</p>
              </div>
            </div>

            <p className="text-gray-600">A confirmation has been sent to our Discord channel.</p>

            <button
              onClick={() => {
                setActiveTab("dashboard");
                setCurrentPage("overview");
                setFormData({
                  region: "", port: "", ship: "", itinerary: "", nights: "", departure: "",
                  sailingDate: "", guests: 2, roomType: "", robloxUsername: "", discordUsername: "",
                  cardNumber: "", expiryDate: "", cvv: "", cardName: "",
                  agreedTerms: false, agreedThirdParty: false, agreedRoomSubject: false,
                  agreedNonRefundable: false, agreedPriceChanges: false, agreedDocumentation: false, agreedInsurance: false,
                });
                setBookingStatus(null);
                setBookingId(null);
              }}
              className="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition"
            >
              Return to Dashboard
            </button>
          </div>
        );

        return (
          <div className="min-h-screen">
            {/* Header */}
            <header className="bg-white shadow-md">
              <div className="max-w-7xl mx-auto px-6 py-4">
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-3">
                    <Anchor size={36} className="text-blue-600" />
                    <div>
                      <h1 className="text-2xl font-bold text-gray-900">Greg Book</h1>
                      <p className="text-sm text-gray-600">Independent Third-Party Cruise Booking</p>
                    </div>
                  </div>
                  
                  {/* Navigation */}
                  <nav className="flex gap-4">
                    <button
                      onClick={() => { setActiveTab("dashboard"); setCurrentPage("overview"); }}
                      className={`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition ${
                        activeTab === "dashboard" ? "bg-blue-600 text-white" : "text-gray-600 hover:bg-gray-100"
                      }`}
                    >
                      <Home size={20} />
                      Dashboard
                    </button>
                    <button
                      onClick={() => setActiveTab("booking")}
                      className={`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition ${
                        activeTab === "booking" ? "bg-blue-600 text-white" : "text-gray-600 hover:bg-gray-100"
                      }`}
                    >
                      <Ship size={20} />
                      Book Now
                    </button>
                  </nav>
                </div>
              </div>
            </header>

            {/* Main Content */}
            <main className="max-w-7xl mx-auto px-6 py-8">
              {activeTab === "dashboard" && <DashboardContent />}
              
              {activeTab === "booking" && (
                <div>
                  {currentPage !== "confirmation" && <ProgressBar />}
                  <div className="bg-white shadow-xl rounded-xl p-8">
                    {currentPage === "overview" && <OverviewPage />}
                    {currentPage === "sailing" && <SailingPage />}
                    {currentPage === "guests" && <GuestsPage />}
                    {currentPage === "payment" && <PaymentPage />}
                    {currentPage === "confirmation" && <ConfirmationPage />}

                    {currentPage !== "confirmation" && (
                      <div className="flex justify-between mt-8 pt-6 border-t">
                        <button
                          onClick={() => {
                            const pages = ["overview", "sailing", "guests", "payment"];
                            const idx = pages.indexOf(currentPage);
                            if (idx > 0) setCurrentPage(pages[idx - 1]);
                          }}
                          className={`px-6 py-3 rounded-lg font-semibold transition ${
                            currentPage === "overview" ? "bg-gray-100 text-gray-400 cursor-not-allowed" : "bg-gray-200 hover:bg-gray-300"
                          }`}
                          disabled={currentPage === "overview"}
                        >
                          Back
                        </button>

                        <div className="flex items-center gap-4">
                          {formData.roomType && (
                            <div className="text-sm text-gray-600 mr-4">
                              <div>Selected: <strong>{formData.roomType}</strong></div>
                              <div>Total: <strong>${calculateTotal().toFixed(2)}</strong></div>
                            </div>
                          )}

                          <button
                            onClick={() => {
                              const pages = ["overview", "sailing", "guests", "payment"];
                              const idx = pages.indexOf(currentPage);
                              if (idx < pages.length - 1) setCurrentPage(pages[idx + 1]);
                            }}
                            className={`px-6 py-3 rounded-lg font-semibold transition ${
                              !canProceed() ? "bg-blue-300 text-white cursor-not-allowed" : "bg-blue-600 text-white hover:bg-blue-700"
                            }`}
                            disabled={!canProceed()}
                          >
                            Next
                          </button>

                          {currentPage === "payment" && (
                            <button
                              onClick={handleSubmit}
                              disabled={!canProceed() || isSubmitting}
                              className={`px-6 py-3 rounded-lg font-semibold transition ${
                                (!canProceed() || isSubmitting) ? "bg-green-300 text-white cursor-not-allowed" : "bg-green-600 text-white hover:bg-green-700"
                              }`}
                            >
                              {isSubmitting ? "Submitting..." : "Confirm Booking"}
                            </button>
                          )}
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              )}
            </main>
          </div>
        );
      };

      // Render
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<GregBookCruise />);

      /*
        Debug helpers (uncomment during troubleshooting in console):
        document.addEventListener('focusin', e => console.log('focusin ->', e.target));
        document.addEventListener('selectionchange', () => console.log('selection ->', String(document.getSelection())));
      */
    </script>
  </body>
</html>
